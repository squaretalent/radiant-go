#!/usr/bin/env ruby

current_dir = File.expand_path(File.dirname(__FILE__))
require current_dir + '/../lib/radiant-go'

if ARGV.size < 1
  puts 'please specify a project name or run radiant-go --help for usage' 
else
  
  config    = (ARGV[0] == '-c' || ARGV[0] == '--create-config')     ? true : false
  usage     = ARGV.any? {|arg| arg == '-h' || arg == '--help'}      ? true : false
  version   = ARGV.any? {|arg| arg == '-v' || arg == '--version'}   ? true : false
  
  if config == true
    
    if ARGV.size != 2
      puts 'please specify a location to create config files' 
    else
    
    name      = ARGV[1]  
    installer = RadiantGo::Installers::Main.new(name)
    installer.generate_config

    end
    
  elsif usage == true
    puts RadiantGo::Main.usage
  elsif version == true
    puts RadiantGo::Main.version
  else
    name      = ARGV.shift
    RAILS_ROOT = "#{current_dir}/#{name}"
    installer = RadiantGo::Installers::Main.new(name)
    installer.run()
  end
  
end